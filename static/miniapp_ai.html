<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AI Taxi Post</title>

<!-- Telegram Mini App -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Sening eski JS fayllaring (TEGMAYMIZ) -->
<script src="miniapp_data.js"></script>
<script defer src="miniapp_ai_v2.js"></script>

<style>
:root{
  --bg: var(--tg-theme-bg-color);
  --card: var(--tg-theme-secondary-bg-color);
  --text: var(--tg-theme-text-color);
  --hint: var(--tg-theme-hint-color);
  --accent: var(--tg-theme-button-color);
  --accent-text: var(--tg-theme-button-text-color);
}

*{
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
}

.container{
  max-width:520px;
  margin:auto;
  padding:16px;
}

h3{
  margin:8px 0 16px;
  font-size:20px;
}

.card{
  background:var(--card);
  border-radius:14px;
  padding:14px;
  margin-bottom:12px;
}

.label{
  font-size:12px;
  color:var(--hint);
  margin-bottom:6px;
}

input, select, textarea{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  background:var(--bg);
  color:var(--text);
}

textarea{
  resize:vertical;
  min-height:70px;
}

.row{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

.toggles{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.toggle{
  padding:8px 14px;
  border-radius:999px;
  font-size:13px;
  cursor:pointer;
  background:var(--bg);
  user-select:none;
}

.toggle.active{
  background:var(--accent);
  color:var(--accent-text);
}

button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:14px;
  background:var(--accent);
  color:var(--accent-text);
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}

.small-btn{
  margin-top:8px;
  padding:10px;
  font-size:14px;
}
</style>
</head>

<body>
<div class="container">

<h3>ðŸ¤– AI Taxi Post</h3>

<!-- YOâ€˜NALISH -->
<div class="card">
  <div class="label">Yoâ€˜nalish (qayerdan â†’ qayerga)</div>
  <div class="row">
    <select id="from_region"></select>
    <select id="to_region"></select>
  </div>
</div>

<!-- TUMANLAR -->
<div class="row">

  <div class="card">
    <div class="label">Qayerdan (tumanlar)</div>
    <div id="from_districts"></div>
    <button class="small-btn" type="button" onclick="addDistrict('from')">
      âž• Tuman qoâ€˜shish
    </button>
  </div>

  <div class="card">
    <div class="label">Qayerga (tumanlar)</div>
    <div id="to_districts"></div>
    <button class="small-btn" type="button" onclick="addDistrict('to')">
      âž• Tuman qoâ€˜shish
    </button>
  </div>

</div>

<!-- ODAMLAR -->
<div class="card">
  <div class="label">Mashinadagi odamlar soni</div>
  <input id="people" type="number" min="1" placeholder="Masalan: 3">
</div>

<!-- HOLATLAR -->
<div class="card">
  <div class="label">Qoâ€˜shimcha holatlar</div>
  <div class="toggles">
    <div class="toggle" data-key="has_woman">ðŸ‘© Ayol bor</div>
    <div class="toggle" data-key="urgent">âš¡ Tezkor</div>
    <div class="toggle" data-key="baggage">ðŸ§³ Bagaj</div>
    <div class="toggle" data-key="mail">ðŸ“¦ Pochta</div>
    <div class="toggle" data-key="telegram">ðŸ’¬ Telegram orqali</div>
  </div>
</div>

<!-- VAQT -->
<div class="card">
  <div class="label">Ketish vaqti</div>
  <input id="time" type="time">
</div>

<!-- MASHINA -->
<div class="card">
  <div class="label">Mashina rusumi</div>
  <select id="car"></select>
  <input id="custom_car" class="hidden" placeholder="Mashina nomini yozing" style="margin-top:8px">
</div>

<!-- YOQILGâ€˜I -->
<div class="card">
  <div class="label">Yoqilgâ€˜i turi</div>
  <select id="fuel">
    <option>Benzin</option>
    <option>Propan</option>
    <option>Metan</option>
    <option>Elektromobil</option>
  </select>
</div>

<!-- ALOQA -->
<div class="card">
  <div class="label">Bogâ€˜lanish uchun telefon</div>
  <input id="phone" placeholder="+998 xx xxx xx xx">
  <input id="phone2" placeholder="Qoâ€˜shimcha raqam (ixtiyoriy)" style="margin-top:8px">
</div>

<!-- IZOH -->
<div class="card">
  <div class="label">Qoâ€˜shimcha izoh</div>
  <textarea id="comment" placeholder="Masalan: ertalab chiqaman, narx kelishiladi"></textarea>
</div>

<button onclick="submitForm()">ðŸš€ AI post yaratish</button>

</div>

<script>
const tg = Telegram.WebApp;
tg.ready();

/* Toggle ishlashi (ESKI JS bilan MOS) */
document.querySelectorAll(".toggle").forEach(t=>{
  t.addEventListener("click",()=>{
    t.classList.toggle("active");
  });
});
</script>

</body>
</html>
