<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Taxi eâ€™lon</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="miniapp_data.js"></script>
<script defer src="miniapp_ai_v2.js"></script>

<style>
body{
  margin:0;
  background:#0f172a;
  color:#f8fafc;
  font-family:system-ui,-apple-system;
}
.container{max-width:520px;margin:auto;padding:16px}
h2{text-align:center;margin-bottom:16px}

.block{margin-bottom:18px}
.label{font-size:15px;font-weight:600;margin-bottom:6px}

input,select,textarea{
  width:100%;
  padding:14px;
  font-size:16px;
  border-radius:12px;
  border:none;
  background:#020617;
  color:#fff;
}

.row{display:flex;gap:10px;flex-wrap:wrap}

.choice{
  flex:1;
  padding:14px;
  text-align:center;
  border-radius:12px;
  background:#020617;
  cursor:pointer;
  font-weight:600;
}
.choice.active{background:#22c55e;color:#052e16}

.toggle{
  padding:14px;
  border-radius:12px;
  background:#020617;
  cursor:pointer;
}
.toggle.active{background:#22c55e;color:#052e16}

button{
  width:100%;
  padding:18px;
  border:none;
  border-radius:14px;
  background:#22c55e;
  color:#052e16;
  font-size:18px;
  font-weight:700;
}
.small{padding:12px;font-size:15px}
.hidden{display:none}
</style>
</head>

<body>
<div class="container">

<h2>ðŸš• Taxi eâ€™lon yaratish</h2>

<!-- YOâ€˜NALISH -->
<div class="block">
  <div class="label">Yoâ€˜nalish</div>
  <div class="row">
    <select id="from_region"></select>
    <select id="to_region"></select>
  </div>
</div>

<!-- TUMAN -->
<div class="block">
  <div class="label">Tumanlar</div>
  <div id="districts"></div>
  <button class="small" onclick="addDistrict()">âž• Tuman qoâ€˜shish</button>
</div>

<!-- ODAMLAR -->
<div class="block">
  <div class="label">Necha kishi bor</div>
  <div class="row">
    <div class="choice" data-p="1">1</div>
    <div class="choice" data-p="2">2</div>
    <div class="choice" data-p="3">3</div>
    <div class="choice" data-p="4">4</div>
  </div>
  <input id="people" type="hidden">
</div>

<!-- HOLATLAR -->
<div class="block">
  <div class="label">Holatlar</div>
  <div class="toggle" data-key="front_seat">ðŸª‘ Old oâ€˜rindiq boâ€˜sh</div>
  <div class="toggle" data-key="has_woman">ðŸ‘© Ayol bor</div>
  <div class="toggle" data-key="urgent">âš¡ Tez chiqish</div>
  <div class="toggle" data-key="baggage">ðŸ§³ Bagaj bor</div>
</div>

<!-- VAQT -->
<div class="block">
  <div class="label">Ketish vaqti</div>
  <div class="row">
    <div class="choice" data-time="01:00">1:00</div>
    <div class="choice" data-time="01:30">1:30</div>
    <div class="choice" data-time="02:00">2:00</div>
    <div class="choice" data-time="02:30">2:30</div>
  </div>
  <input id="time" type="hidden">
</div>

<!-- MASHINA -->
<div class="block">
  <div class="label">Mashina</div>
  <select id="car"></select>
  <input id="custom_car" class="hidden" placeholder="Mashina nomini yozing">
</div>

<!-- TELEFON -->
<div class="block">
  <div class="label">Telefon raqam</div>
  <input id="phone" value="+998 ">
  <input id="phone2" type="hidden">
  <button class="small" onclick="fillMyPhone()">ðŸ“² Mening raqamim</button>
</div>

<!-- IZOH -->
<div class="block">
  <div class="label">Izoh</div>
  <textarea id="comment"></textarea>
</div>

<button onclick="submitForm()">ðŸš€ Eâ€™lon yaratish</button>

</div>

<script>
Telegram.WebApp.ready();

/* odamlar */
document.querySelectorAll("[data-p]").forEach(b=>{
  b.onclick=()=>{
    document.getElementById("people").value=b.dataset.p;
    document.querySelectorAll("[data-p]").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
  };
});

/* vaqt */
document.querySelectorAll("[data-time]").forEach(b=>{
  b.onclick=()=>{
    document.getElementById("time").value=b.dataset.time;
    document.querySelectorAll("[data-time]").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
  };
});

/* toggle sync */
document.querySelectorAll(".toggle").forEach(t=>{
  t.onclick=()=>t.classList.toggle("active");
});

/* telefon */
function fillMyPhone(){
  const p = Telegram.WebApp.initDataUnsafe?.user?.phone_number;
  if(p) document.getElementById("phone").value = "+998 " + p.slice(-9);
}
</script>

</body>
</html>
